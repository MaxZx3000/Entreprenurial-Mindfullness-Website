(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{49:function(e,t,n){"use strict";var f=n(0),m=n(2),v=n(4),r=n(3),y=n.n(r),g=n(5),h=n(6),b=n(1),w=n(11),_=n(8);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function E(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function a(e){l(r,t,n,a,i,"next",e)}function i(e){l(r,t,n,a,i,"throw",e)}a(void 0)})}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(n){var r=s();return function(){var e,t=u(n),t=(e=r?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function i(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,u(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),S(t,e)}(e)}function o(e,t,n){return(o=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&S(t,n.prototype),t}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e);var n,r,a,i,o,s,l,u,c,d=O(p);function p(){var e;if(this instanceof p)return(e=d.call(this)).registerElement=document.createElement("div"),e.provinceJSON={},e;throw new TypeError("Cannot call a class as a function")}return t=p,(e=[{key:"render",value:function(){this.registerElement.innerHTML='\n            <div class = "h1-header">\n                <h1 data-i18n-key = "Register">Register</h1>\n            </div>\n            <div class = "container">\n                <form class = "needs-validation" novalidate>\n                    <div class = "form-group">\n                        <label for = "username" data-i18n-key = "Username">Username</label>\n                        <input type = "text" class = "form-control" id = "username" name = "username">\n                        <div class="invalid-feedback">\n                            \n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "password" data-i18n-key = "Password">Password</label>\n                        <input type = "password"  class = "form-control" id = "password" name = "password">\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "confirm_password" data-i18n-key = "confirm_password">Confirm Password</label>\n                        <input type = "password"  class = "form-control" id = "confirm_password" name = "confirm_password">\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "fullname" data-i18n-key = "fullname">Full name</label>\n                        <input type = "text"  class = "form-control" id = "fullname" name = "fullname">\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "e_mail_address" data-i18n-key = "e_mail_address">E-mail address</label>\n                        <input type = "text" class = "form-control" id = "email" name = "email">\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label data-i18n-key = "gender">Gender</label>\n                        <br>\n                        <div id = "radio-gender" class = "radio-group">\n                            <input type="radio" id="male" name="gender" value="Male">\n                            <label for="male" data-i18n-key = "male">Male</label>\n                            <input type="radio" id="female" name="gender" value="Female">\n                            <label for="female" data-i18n-key = "female">Female</label>\n                        </div>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "country_id" data-i18n-key = "country">Country</label>\n                        <select type = "text"  class = "form-control" id = "country_id" name = "country_id"></select>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "province_id" data-i18n-key = "province">Province</label>\n                        <select type = "text"  class = "form-control" id = "province_id" name = "province_id"></select>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "row">\n                        <div class = "col-sm">\n                            <div class = "form-group">\n                                <label for = "age" data-i18n-key = "age">Age</label>\n                                <select type = "text"  class = "form-control" id = "age_id" name = "age_id"></select>\n                                <div class="invalid-feedback">\n                                </div>\n                            </div>\n                            <div class = "form-group">\n                                <label for = "status" data-i18n-key = "status">Status</label>\n                                <select type = "text"  class = "form-control" id = "status_id" name = "status_id"></select>\n                                <div class="invalid-feedback">\n                                </div>\n                            </div>\n                        </div>\n                        <div class = "col-sm">\n                            <div class = "form-group">\n                                <label for = "type_of_business" data-i18n-key = "type_of_business">Type of Business</label>\n                                <select class = "form-control" id = "business_id" name = "business_id"></select>\n                                <div class="invalid-feedback">\n                            </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <button type = "button" id = "register" class = "action-button" data-i18n-key = "Register">Register</button>\n                    </div>\n                    <div class = "form-group">\n                        <a href = "#login" data-i18n-key = "already_registered"></a>\n                    </div>\n                </form>\n            </div>\n        '}},{key:"fetchData",value:(c=E(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addCountriesOptionElement();case 2:this.addProvincesOptionElement(),this.addAgesOptionElement(),this.addStatusesOptionElement(),this.addBusinessesOptionElement();case 6:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"addProvincesOfflineOptionElement",value:function(){var n=this.registerElement.querySelector("#province_id"),t=this.registerElement.querySelector("#country_id"),e=this.provinceJSON.filter(function(e){return e.country_id==t.value});console.log(e),n.innerHTML="",e.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)})}},{key:"addProvincesOptionElement",value:(u=E(regeneratorRuntime.mark(function e(){var n,t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getJSONResult(v.a.getProvinceAllLink(),m.a.getDefaultRequestBody());case 2:200===(t=e.sent).status&&(this.provinceJSON=t.json,n=this.registerElement.querySelector("#province_id"),t=this.registerElement.querySelector("#country_id"),this.provinceJSON.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)}),t.addEventListener("change",function(){r.addProvincesOfflineOptionElement()}));case 4:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"addCountriesOptionElement",value:(l=E(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getJSONResult(v.a.getCountryLink(),m.a.getDefaultRequestBody());case 2:200===(t=e.sent).status&&(t=t.json,n=this.registerElement.querySelector("#country_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"addStatusesOptionElement",value:(s=E(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getStatusData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.registerElement.querySelector("#status_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.status,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"addAgesOptionElement",value:(o=E(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getAgeData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.registerElement.querySelector("#age_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.age,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"addBusinessesOptionElement",value:(i=E(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getBusinessData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.registerElement.querySelector("#business_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.business,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"performRequest",value:(a=E(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",mode:"cors"},body:JSON.stringify(t)},e.next=3,m.a.getJSONResult(v.a.getRegisterLink(),n);case 3:200===(n=e.sent).status?(y.a.fire({title:"Hooray!",icon:"success",showCancelButton:!1,showConfirmButton:!1,showDenyButton:!1,html:"\n                    <p>".concat(f.a.getLocalizedText("success-register"),'</p>\n                    <button type = "button" id = "swal-close-button" class = "action-button" id = "forgot-password" style = "width: 100%">OK</button>\n                ')}),_.a.setWindowURLHash("login")):400===n.status?y.a.fire({title:"Oops!",icon:"error",showCancelButton:!1,showConfirmButton:!1,showDenyButton:!1,html:"\n                    <p>".concat(f.a.getLocalizedText("duplicate_username_email"),'</p>\n                    <button type = "button" id = "swal-close-button" class = "action-button" id = "forgot-password" style = "width: 100%">OK</button>\n                ')}):-1===n.status&&y.a.fire({title:"Oops!",icon:"error",showCancelButton:!1,showConfirmButton:!1,showDenyButton:!1,html:'\n                    <p>Unknown Error Occured!</p>\n                    <button type = "button" id = "swal-close-button" class = "action-button" id = "forgot-password" style = "width: 100%">OK</button>\n                '}),h.a.initializeCloseButton();case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"validateForm",value:function(e){var t;return!1===b.a.validateUsername(e.username).isTrue?((t=b.a.validateUsername(e.username)).element="#username",t):!1===b.a.validatePassword(e.password).isTrue?((t=b.a.validatePassword(e.password)).element="#password",t):!1===b.a.validateConfirmPassword(e.password,e.confirm_password).isTrue?((t=b.a.validateConfirmPassword(e.password,e.confirm_password)).element="#confirm_password",t):!1===b.a.validateEmail(e.email).isTrue?((t=b.a.validateEmail(e.email)).element="#email",t):!1===b.a.validateGender(e.gender).isTrue?((t=b.a.validateGender(e.gender)).element='input[name = "gender"]',t):!1===b.a.validateCity(e.country_id).isTrue?((t=b.a.validateCity(e.country_id)).element="#country_id",t):!1===b.a.validateProvince(e.status_id).isTrue?((t=b.a.validateProvince(e.status_id)).element="#status_id",t):!1===b.a.validateAge(e.age_id).isTrue?((t=b.a.validateAge(e.age_id)).element="#age_id",t):!1===b.a.validateBusinessType(e.business_id).isTrue?((t=b.a.validateBusinessType(e.business_id)).element="#business_id",t):{isTrue:!0,element:null}}},{key:"setListeners",value:function(){var f=this,e=this.registerElement.querySelector("#register");this.registerElement.querySelectorAll("input[type='text'], select, .radio-group").forEach(function(e){e.addEventListener("input",function(){w.a.makeRegularStatusField(f.registerElement,"#".concat(e.id))})}),e.addEventListener("click",function(){var t=E(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,l,u,c,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=f.registerElement.querySelector("#username").value,d=f.registerElement.querySelector("#password").value,p=f.registerElement.querySelector("#confirm_password").value,n=f.registerElement.querySelector("#email").value,r=f.registerElement.querySelector("#fullname").value,a=f.registerElement.querySelector("input[name = 'gender']").value,i=f.registerElement.querySelector("#country_id").value,o=f.registerElement.querySelector("#province_id").value,s=f.registerElement.querySelector("#age_id").value,l=f.registerElement.querySelector("#status_id").value,u=f.registerElement.querySelector("#business_id").value,c={username:c,password:d,confirm_password:p,email:n,fullname:r,gender:a,country_id:i,province_id:o,age_id:s,status_id:l,business_id:u},d=f.validateForm(c),console.log(d),!1===d.isTrue)return w.a.makeInvalidStatusField(f.registerElement,d),f.registerElement.querySelector(d.element).focus(),e.abrupt("return");e.next=18;break;case 18:return e.next=20,g.a.userCheck(c.username,c.email);case 20:if(409===(p=e.sent).status)return y.a.fire({title:"Oops!",showCancelButton:!1,showConfirmButton:!1,html:"\n                        <p>".concat(p.json.message,'</p>\n                        <button type = "button" class = "action-button" id = "swal-close-button" style = "width: 100%">OK</button>\n                    ')}).then(function(){h.a.initializeCloseButton()}),e.abrupt("return");e.next=24;break;case 24:return h.a.initializeLoadingPopUp(),e.next=27,f.performRequest(c);case 27:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"init",value:(r=E(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.render(),f.a.initTranslate(),this.fetchData(),this.setListeners(),this.appendChildren();case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"appendChildren",value:function(){this.appendChild(this.registerElement)}}])&&k(t.prototype,e),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(i(HTMLElement));customElements.define("register-page",r),t.a=r}}]);