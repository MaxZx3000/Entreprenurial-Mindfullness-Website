(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{58:function(e,t,n){"use strict";var r=n(3),m=n.n(r),v=n(4),y=n(11),h=n(5),b=n(6),g=n(9),_=n(1),E=n(2),w=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function k(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){l(r,t,n,i,o,"next",e)}function o(e){l(r,t,n,i,o,"throw",e)}i(void 0)})}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(n){var r=s();return function(){var e,t=u(n),t=(e=r?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function o(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,u(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),x(t,e)}(e)}function a(e,t,n){return(a=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&x(t,n.prototype),t}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e);var n,r,i,o,a,s,l,u,c,d,f=S(p);function p(){var e;if(this instanceof p)return(e=f.call(this)).editProfileElement=document.createElement("div"),e.provinceJSON={},e;throw new TypeError("Cannot call a class as a function")}return t=p,(e=[{key:"render",value:function(){this.editProfileElement.innerHTML='\n            <img id = "background-profile" src = "https://img.freepik.com/free-vector/alone-concept-illustration_114360-2393.jpg?t=st=1652167671~exp=1652168271~hmac=1ec930ffe4c6e31e560abe966f0c7c0835dbc7be6c7dab05236b0d445e8617b0&w=740" class = "background_image">\n            <div class = "container">                \n                <form>\n                    <div class = "image-container">\n                        <img id = \'profile-picture\' src = "https://upload.wikimedia.org/wikipedia/commons/6/67/Vector_Face_wearing_Spectacles.png" id = "profile-image">\n                        \x3c!-- <button type = "file" class = "icon-button" id = "edit-picture">\n                            <span class="material-icons material-symbols-outlined">edit</span>\n                        </button> --\x3e\n                    </div>\n                    <div class = "form-group">\n                        <label for = "fullname" data-i18n-key = "fullname">Full name</label>\n                        <input type = "text"  class = "form-control" id = "fullname" name = "fullname">\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label data-i18n-key = "gender">Gender</label>\n                        <br>\n                        <input type="radio" id="male" name="gender" value="Male">\n                        <label for="male" data-i18n-key = "male">Male</label>\n                        <input type="radio" id="female" name="gender" value="Female">\n                        <label for="female" data-i18n-key = "female">Female</label>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "country_id" data-i18n-key = "country">Country</label>\n                        <select type = "text"  class = "form-control" id = "country_id" name = "country_id"></select>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <label for = "province_id" data-i18n-key = "province">Province</label>\n                        <select type = "text"  class = "form-control" id = "province_id" name = "province_id"></select>\n                        <div class="invalid-feedback">\n                        </div>\n                    </div>\n                    <div class = "row">\n                        <div class = "col-sm">\n                            <div class = "form-group">\n                                <label for = "age" data-i18n-key = "age">Age</label>\n                                <select type = "text"  class = "form-control" id = "age_id" name = "age_id"></select>\n                                <div class="invalid-feedback">\n                                </div>\n                            </div>\n                            <div class = "form-group">\n                                <label for = "status" data-i18n-key = "status">Status</label>\n                                <select type = "text"  class = "form-control" id = "status_id" name = "status_id"></select>\n                                <div class="invalid-feedback">\n                                </div>\n                            </div>\n                        </div>\n                        <div class = "col-sm">\n                            <div class = "form-group">\n                                <label for = "type_of_business" data-i18n-key = "type_of_business">Type of Business</label>\n                                <select class = "form-control" id = "business_id" name = "business_id"></select>\n                                <div class="invalid-feedback">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class = "form-group">\n                        <button type = "button" id = "register-button" class = "action-button">Update Profile</button>\n                    </div>\n                </form>\n            </div>\n        '}},{key:"addProvincesOfflineOptionElement",value:function(){var n=this.editProfileElement.querySelector("#province_id"),t=this.editProfileElement.querySelector("#country_id"),e=this.provinceJSON.filter(function(e){return e.country_id==t.value});console.log(e),n.innerHTML="",e.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)})}},{key:"addProvincesOptionElement",value:(d=k(regeneratorRuntime.mark(function e(){var n,t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.getJSONResult(v.a.getProvinceAllLink(),E.a.getDefaultRequestBody());case 2:200===(t=e.sent).status&&(this.provinceJSON=t.json,n=this.editProfileElement.querySelector("#province_id"),t=this.editProfileElement.querySelector("#country_id"),this.provinceJSON.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)}),t.addEventListener("change",function(){r.addProvincesOfflineOptionElement()}));case 4:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"addCountriesOptionElement",value:(c=k(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.getJSONResult(v.a.getCountryLink(),E.a.getDefaultRequestBody());case 2:200===(t=e.sent).status&&(t=t.json,n=this.editProfileElement.querySelector("#country_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.name,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"addStatusesOptionElement",value:(u=k(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getStatusData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.editProfileElement.querySelector("#status_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.status,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"addAgesOptionElement",value:(l=k(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getAgeData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.editProfileElement.querySelector("#age_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.age,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"addBusinessesOptionElement",value:(s=k(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getBusinessData();case 2:200===(t=e.sent).status&&(t=t.json,n=this.editProfileElement.querySelector("#business_id"),t.forEach(function(e){var t=document.createElement("option");t.innerText=e.business,t.value=e.id,n.appendChild(t)}));case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"performRequest",value:(a=k(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.a.initializeLoadingPopUp(),e.next=3,h.a.editProfile(t);case 3:200===(n=e.sent).status?(m.a.fire({title:"Hooray!",icon:"success",showCancelButton:!1,showConfirmButton:!1,showDenyButton:!1,html:"\n                    <p>".concat(w.a.getLocalizedText("success-edit-profile"),'</p>\n                    <button type = "button" id = "swal-close-button" class = "action-button" id = "forgot-password" style = "width: 100%">OK</button>\n                \n                ')}),b.a.initializeCloseButton()):401===n.status&&(console.log(n.json),m.a.fire({title:"Oops!",icon:"error",showCancelButton:!1,showCloseButton:!1,showDenyButton:!1,html:"\n                    <p>".concat(n.json.message,'</p>\n                    <button type = "button"id = "swal-close-button"  class = "action-button"></button>')}),b.a.initializeCloseButton());case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"validateForm",value:function(e){var t;return!1===_.a.validateFullname(e.fullname).isTrue?((t=_.a.validateFullname(e.fullname)).element="#fullname",t):!1===_.a.validateCity(e.country_id).isTrue?((t=_.a.validateCity(e.country_id)).element="#country_id",t):!1===_.a.validateProvince(e.status_id).isTrue?((t=_.a.validateProvince(e.status_id)).element="#status_id",t):!1===_.a.validateAge(e.age_id).isTrue?((t=_.a.validateAge(e.age_id)).element="#age_id",t):!1===_.a.validateBusinessType(e.business_id).isTrue?((t=_.a.validateBusinessType(e.business_id)).element="#business_id",t):{isTrue:!0,element:null}}},{key:"setListeners",value:function(){var l=this;this.editProfileElement.querySelectorAll("input[type='text'], select, .radio-group").forEach(function(e){e.addEventListener("input",function(){y.a.makeRegularStatusField(l.editProfileElement,"#".concat(e.id))})}),this.editProfileElement.querySelector("#register-button").addEventListener("click",k(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.editProfileElement.querySelector("#fullname").value,a=l.editProfileElement.querySelector("input[name = 'gender']").value,s=l.editProfileElement.querySelector("#country_id").value,t=l.editProfileElement.querySelector("#province_id").value,n=l.editProfileElement.querySelector("#age_id").value,r=l.editProfileElement.querySelector("#status_id").value,i=l.editProfileElement.querySelector("#business_id").value,!(o={fullname:o,gender:a,country_id:s,province_id:t,age_id:n,status_id:r,business_id:i})===(a=l.validateForm(o)).isTrue&&(y.a.makeInvalidStatusField(l.editProfileElement,a),l.editProfileElement.querySelector(a.element).focus()),e.next=12,h.a.userCheck(o.username,o.email);case 12:if(409===(s=e.sent).status)return m.a.fire({title:"Oops!",showCancelButton:!1,showConfirmButton:!1,showDenyButton:!1,html:"\n                            <p>".concat(s.json.message,'</p>\n                            <button type = "button" class = "action-button" id = "swal-close-button" style = "width: 100%">OK</button>\n                        ')}),b.a.initializeCloseButton(),e.abrupt("return");e.next=17;break;case 17:return e.next=19,l.performRequest(o);case 19:case"end":return e.stop()}},e)})))}},{key:"fetchUserData",value:(o=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getUserFullData();case 2:t=e.sent,this.editProfileElement.querySelector("#fullname").value=t.fullname,this.editProfileElement.querySelector("input[name = 'gender']").value=t.gender,this.editProfileElement.querySelector("#country_id").value=t.country_id,this.editProfileElement.querySelector("#province_id").value=t.province_id,this.editProfileElement.querySelector("#age_id").value=t.age_id,this.editProfileElement.querySelector("#status_id").value=t.status_id,this.editProfileElement.querySelector("#business_id").value=t.business_id;case 10:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"appendChildren",value:function(){this.appendChild(this.editProfileElement)}},{key:"fetchData",value:(i=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.addProvincesOptionElement(),this.addCountriesOptionElement(),this.addAgesOptionElement(),this.addStatusesOptionElement(),e.next=6,this.addBusinessesOptionElement();case 6:this.fetchUserData();case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"init",value:(r=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.render(),this.fetchData(),this.setListeners(),this.appendChildren();case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&P(t.prototype,e),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o(HTMLElement));customElements.define("edit_profile-page",r),t.a=r}}]);